(function (p) {
  function s(e, o) {
    var n = new Date(),
      i = n.getTime(),
      t = e.data("options"),
      s = t.post_ID;
    n.setTime(n.getTime() + o * 24 * 60 * 60 * 1e3);
    document.cookie =
      "glozin_popup_" + s + "=" + i + ";expires=" + n.toGMTString() + ";path=/";
    if (e.hasClass("glozin-popup-type--slide")) {
      e.removeClass("offscreen-panel--open");
      e.find(".panel__backdrop").fadeOut();
      p(document.body).removeClass("offcanvas-opened");
    } else {
      e.removeClass("modal--open")
        .addClass("modal--closing")
        .fadeOut(400, function () {
          p(this).removeClass("modal--closing");
        });
      p(document.body).removeClass("modal-opened");
    }
    p(document.body).removeAttr("style");
  }
  function l(e) {
    var o = e[0],
      n = p("#glozin_popup_" + o);
    if (!n.length) {
      return;
    }
    var i = n.data("options"),
      t = i.visiblle,
      s = i.seconds,
      s = Math.max(s, 0);
    s = "delayed" === t ? s : 0;
    setTimeout(function () {
      if (n.hasClass("glozin-popup-type--slide")) {
        n.addClass("offscreen-panel--open");
        n.find(".panel__backdrop").fadeIn();
        p(document.body).addClass("offcanvas-opened");
      } else {
        n.addClass("modal--opening")
          .fadeIn(400, function () {
            p(this).removeClass("modal--opening");
          })
          .addClass("modal--open");
        p(document.body).addClass("modal-opened");
      }
      var e = window.innerWidth - p("#page").width();
      if (p("#page").width() < 767) {
        e = 0;
      }
      p(document.body).css({ "padding-inline-end": e, overflow: "hidden" });
    }, s * 1e3);
  }
  p(function () {
    if (!p(".glozin-popup").length) {
      return;
    }
    var d = [],
      a = [];
    p(".glozin-popup").each(function () {
      var o = p(this),
        e = o.data("options"),
        n = e.post_ID,
        i = e.visiblle,
        t = e.frequency,
        s = e.seconds;
      s = Math.max(s, 0);
      s = "delayed" === i ? s : 0;
      $cookie_name = "glozin_popup_" + n;
      if (
        t > 0 &&
        document.cookie.match(
          new RegExp("(^|;\\s*)" + $cookie_name + "=([^;]*)")
        )
      ) {
        return;
      }
      if ("exit" === i) {
        a.push(n);
        return;
      }
      if (!d.length) {
        p(window).on("load", function () {
          setTimeout(function () {
            if (o.hasClass("glozin-popup-type--slide")) {
              o.addClass("offscreen-panel--open");
              o.find(".panel__backdrop").fadeIn();
              p(document.body).addClass("offcanvas-opened");
            } else {
              o.fadeIn().addClass("modal--open");
              p(document.body).addClass("modal-opened");
            }
            var e = window.innerWidth - p("#page").width();
            if (p("#page").width() < 767) {
              e = 0;
            }
            p(document.body).css({
              "padding-inline-end": e,
              overflow: "hidden",
            });
          }, s * 1e3);
        });
      }
      d.push(n);
    });
    p(".glozin-popup:not(.glozin-popup-visible--exit)").on(
      "click",
      ".glozin-popup__close, .glozin-popup__backdrop",
      function (e) {
        e.preventDefault();
        var o = p(this),
          n = o.closest(".glozin-popup"),
          i = n.data("options"),
          t = i.frequency;
        s(n, t);
        d.shift();
        if (d.length) {
          l(d);
        }
      }
    );
    p(document.body).on("click", ".glozin-dismiss-popup-button", function (e) {
      e.preventDefault();
      var o = p(this).closest(".glozin-popup"),
        n = p(this)
          .closest(".elementor-widget-glozin-dismiss-popup-button")
          .data("settings"),
        i = n.dismiss_button_frequency;
      s(o, i);
      d.shift();
      if (d.length) {
        l(d);
      }
    });
    document.addEventListener("mouseleave", function (e) {
      setTimeout(function () {
        if (a.length) {
          l(a);
        }
      }, 500);
      p(".glozin-popup-visible--exit").on(
        "click",
        ".glozin-popup__close, .glozin-popup__backdrop",
        function (e) {
          e.preventDefault();
          var o = p(this),
            n = o.closest(".glozin-popup"),
            i = n.data("options"),
            t = i.frequency;
          s(n, t);
          a.shift();
          if (a.length) {
            l(a);
          }
        }
      );
    });
  });
})(jQuery);
