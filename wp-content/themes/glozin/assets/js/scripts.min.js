(function (g) {
  "use strict";
  var f = f || {};
  f.init = function () {
    (f.$body = g(document.body)),
      (f.$window = g(window)),
      (f.$header = g("#site-header"));
    this.toggleOffCanvas();
    this.toggleModals();
    this.togglePopover();
    this.formFieldFocus();
    this.instantSearch();
    this.progressBar();
    this.lazyLoadVideo();
    this.loginPopup();
    this.loginModalAuthenticate();
    this.registerPopup();
    this.currencyLanguage();
    this.headerCampaignBar();
    this.stickyHeader();
    this.headerProductCategories();
    this.glozinSwiper();
    this.loadMorePosts();
    this.postFound();
    this.lazyLoadImage();
    this.productAttribute();
    this.productQuantityNumber();
    this.productQuickView();
    this.productSaleMarquee();
    f.$body.on(
      "glozin_products_filter_request_success glozin_get_products_ajax_loaded",
      function () {
        f.productSaleMarquee();
      }
    );
    this.updateCartQtyAuto();
    this.productVariation();
    f.$body.on("glozin_single_product_variation_form_init", function () {
      f.productVariation();
    });
    this.recentlyViewedProducts();
    this.productAffiliate();
    this.openMiniCartPanel();
    this.updateMiniCartQtyAuto();
    this.updateMiniCartContent();
    this.productQuickEdit();
    this.removeItemFromMiniCart();
    this.applyCoupon();
    this.updateShippingAddress();
    this.addedToWishlistNotice();
    this.addedToCompareNotice();
    this.copyLink();
    this.backToTop();
    this.toggleProductCategoriesWidget();
    this.dropdownProductCategoriesSidebar();
    this.tooltip();
    this.orderComments();
    this.mobileMenu();
    this.hamburgerToggleMenuItem();
    this.hamburgerToggleMegaMenuItem();
    this.navigationBar();
  };
  f.toggleOffCanvas = function () {
    g(document.body)
      .on("click", '[data-toggle="off-canvas"]', function (e) {
        var t = "#" + g(this).data("target");
        if (g(t).hasClass("offscreen-panel--open")) {
          f.closeOffCanvas(t);
        } else if (f.openOffCanvas(t)) {
          e.preventDefault();
        }
        if (
          t == "#filter-sidebar-panel" &&
          g("body").hasClass("woocommerce-shop-elementor")
        ) {
          if (g("body").find(".catalog-toolbar__filter-button").length > 0) {
            e.preventDefault();
            g(g("body").find(".catalog-toolbar__filter-button").get(0)).trigger(
              "click"
            );
          }
        }
      })
      .on(
        "click",
        ".offscreen-panel .panel__button-close, .offscreen-panel .panel__backdrop, .offscreen-panel .sidebar__button-close, .offscreen-panel .sidebar__backdrop",
        function (e) {
          e.preventDefault();
          f.closeOffCanvas(this);
        }
      )
      .on("keyup", function (e) {
        if (e.keyCode === 27) {
          f.closeOffCanvas();
        }
      });
  };
  f.openOffCanvas = function (e) {
    var t = g(e);
    if (!t.length) {
      if (!g('.offscreen-panel[data-id="' + e.replace("#", "") + '"]').length) {
        return false;
      } else {
        t = g('.offscreen-panel[data-id="' + e.replace("#", "") + '"]');
      }
    }
    var i = window.innerWidth - g("#page").width();
    if (g("#page").width() < 767) {
      i = 0;
    }
    g(document.body).css({ "padding-right": i, overflow: "hidden" });
    t.find(".panel__backdrop, .sidebar__backdrop").fadeIn();
    t.addClass("offscreen-panel--open");
    var o = t.attr("id") ? t.attr("id") : t.data("id");
    g(document.body)
      .addClass("offcanvas-opened " + o + "-opened")
      .trigger("glozin_off_canvas_opened", [t]);
    return true;
  };
  f.closeOffCanvas = function (e) {
    if (!e) {
      g(".offscreen-panel").each(function () {
        var e = g(this),
          t = e.attr("id") ? e.attr("id") : e.data("id");
        if (!e.hasClass("offscreen-panel--open")) {
          return;
        }
        if (e.find(".glozin-mini-products-recommended").length) {
          e.find(".glozin-mini-products-recommended").removeClass("mini--open");
          setTimeout(function () {
            e.removeClass("offscreen-panel--open");
            e.find(".panel__backdrop, .sidebar__backdrop").fadeOut();
          }, 600);
        } else {
          e.removeClass("offscreen-panel--open");
          e.find(".panel__backdrop, .sidebar__backdrop").fadeOut();
        }
        g(document.body).removeClass(t + "-opened");
        if (e.hasClass("modal-above-panel")) {
          e.removeClass("modal-above-panel");
        }
        if (e.hasClass("modal-above-panel__quickadd")) {
          e.removeClass("modal-above-panel__quickadd");
        }
      });
    } else {
      e = g(e).closest(".offscreen-panel");
      var t = e.attr("id") ? e.attr("id") : e.data("id");
      if (
        e.find(".glozin-mini-products-recommended").length &&
        e.find(".glozin-mini-products-recommended").hasClass("mini--open")
      ) {
        e.find(".glozin-mini-products-recommended").removeClass("mini--open");
        setTimeout(function () {
          e.removeClass("offscreen-panel--open");
          e.find(".panel__backdrop, .sidebar__backdrop").fadeOut();
        }, 600);
      } else {
        e.removeClass("offscreen-panel--open");
        e.find(".panel__backdrop, .sidebar__backdrop").fadeOut();
      }
      g(document.body).removeClass(t + "-opened");
      if (e.hasClass("modal-above-panel")) {
        e.removeClass("modal-above-panel");
      }
      if (e.hasClass("modal-above-panel__quickadd")) {
        e.removeClass("modal-above-panel__quickadd");
      }
    }
    const i = document.body;
    const o = i.style.getPropertyValue("--gz-navigation-bar-height");
    g(document.body).removeAttr("style");
    if (o) {
      i.style.setProperty("--gz-navigation-bar-height", o);
    }
    g(document.body)
      .removeClass("offcanvas-opened")
      .trigger("glozin_off_canvas_closed", [e]);
  };
  f.toggleModals = function () {
    g(document.body)
      .on("click", '[data-toggle="modal"]', function (e) {
        if (g(this).data("modal") == "no") {
          return;
        }
        var t = "#" + g(this).data("target");
        if (g(t).hasClass("modal--open")) {
          if (g(this).is("form.gz-instant-search__form")) {
            return;
          }
          if (g(this).closest("body").hasClass("offcanvas-opened")) {
            f.closeModal(t, false);
          } else {
            f.closeModal(t);
          }
        } else if (f.openModal(t)) {
          e.preventDefault();
        }
      })
      .on(
        "click",
        ".modal .modal__button-close, .modal .modal__backdrop",
        function (e) {
          e.preventDefault();
          if (g(this).closest("body").hasClass("offcanvas-opened")) {
            f.closeModal(this, false);
          } else {
            f.closeModal(this);
          }
        }
      )
      .on("keyup", function (e) {
        if (e.keyCode === 27) {
          f.closeModal();
        }
      });
  };
  f.openModal = function (e) {
    var t = g(e);
    t = t.length ? t : g('.modal[data-id="' + e + '"]');
    if (!t.length) {
      var e = e.replace("#", "");
      t = g('.modal[data-id="' + e + '"]');
    }
    if (!t.length) {
      return false;
    }
    if (t.hasClass("modal-to-form")) {
      g(document.body).addClass("search-modal-form");
    }
    var i = g("body").hasClass("glozin-header-sidebar-categories-enable")
      ? g("#page").width() + parseFloat(g("body").css("padding-inline-start"))
      : g("#page").width();
    var o = window.innerWidth - parseFloat(i);
    if (
      (g("html").attr("dir") === "rtl" ||
        g("body").css("direction") === "rtl") &&
      g("body").hasClass("glozin-header-sidebar-categories-enable")
    ) {
      o =
        window.innerWidth -
        parseFloat(i) +
        parseFloat(g("body").css("padding-inline-start"));
    }
    if (i < 767) {
      o = 0;
    }
    g(document.body).css({ "padding-right": o, overflow: "hidden" });
    t.addClass("modal--opening");
    t.fadeIn(1e3, function () {
      g(this).removeClass("modal--opening");
    });
    t.addClass("modal--open");
    g(document.body)
      .addClass("modal-opened " + t.attr("id") + "-opened")
      .trigger("glozin_modal_opened", [t]);
    return true;
  };
  f.closeModal = function (e, t = true, i = 400) {
    if (!e) {
      g(".modal")
        .removeClass("modal--open")
        .addClass("modal--closing")
        .fadeOut(i, function () {
          g(this).removeClass("modal--closing");
        });
      g(".modal").each(function () {
        var e = g(this);
        if (!e.hasClass("modal--open")) {
          return;
        }
        e.removeClass("modal--open")
          .addClass("modal--closing")
          .fadeOut(i, function () {
            g(this).removeClass("modal--closing");
          });
        g(document.body).removeClass(e.attr("id") + "-opened");
      });
    } else {
      e = g(e).closest(".modal");
      e.removeClass("modal--open")
        .addClass("modal--closing")
        .fadeOut(i, function () {
          g(this).removeClass("modal--closing");
        });
      g(document.body).removeClass(e.attr("id") + "-opened");
    }
    g(document.body).removeClass("search-modal-form");
    if (!g(e).parents(".modal").length) {
      if (t) {
        const o = document.body;
        const a = o.style.getPropertyValue("--gz-navigation-bar-height");
        g(document.body).removeAttr("style");
        if (a) {
          o.style.setProperty("--gz-navigation-bar-height", a);
        }
      }
      g(document.body)
        .removeClass("modal-opened")
        .trigger("glozin_modal_closed", [e]);
    }
  };
  f.togglePopover = function () {
    g(document.body)
      .on("click", '[data-toggle="popover"]', function (e) {
        var t = "#" + g(this).data("target");
        if (g(this).data("device") == "mobile") {
          if (f.$window.width() > 767) {
            return;
          }
        }
        if (g(t).hasClass("popover--open")) {
          f.closePopover(t);
        } else if (f.openPopover(t)) {
          e.preventDefault();
        }
      })
      .on(
        "click",
        '.popover .popover__button-close, .popover .popover__backdrop, [data-popover="close"]',
        function (e) {
          e.preventDefault();
          f.closePopover(this);
        }
      )
      .on("keyup", function (e) {
        if (e.keyCode === 27) {
          f.closePopover();
        }
      });
  };
  f.openPopover = function (e) {
    var t = g(e);
    t = t.length ? t : g('.popover[data-id="' + e + '"]');
    if (!t.length) {
      var e = e.replace("#", "");
      t = g('.popover[data-id="' + e + '"]');
    }
    if (!t.length) {
      return false;
    }
    var i = window.innerWidth - g("#page").width();
    if (g("#page").width() < 767) {
      i = 0;
    }
    if (t.data("padding") !== false) {
      g(document.body).css({ "padding-right": i, overflow: "hidden" });
    }
    t.fadeIn();
    t.addClass("popover--open");
    g(document.body)
      .addClass("popover-opened " + t.attr("id") + "-opened")
      .trigger("glozin_popover_opened", [t]);
    return true;
  };
  f.closePopover = function (e, t = true) {
    if (!e) {
      g(".popover").removeClass("popover--open").fadeOut();
      g(".popover").each(function () {
        var e = g(this);
        if (!e.hasClass("popover--open")) {
          return;
        }
        e.removeClass("popover--open");
        g(document.body).removeClass(e.attr("id") + "-opened");
      });
    } else {
      e = g(e).closest(".popover");
      e.removeClass("popover--open");
      g(document.body).removeClass(e.attr("id") + "-opened");
      if (e.attr("data-padding") === "false") {
        t = false;
      }
    }
    if (t) {
      g(document.body).removeAttr("style");
    }
    g(document.body)
      .removeClass("popover-opened")
      .trigger("glozin_popover_closed", [e]);
  };
  f.progressBar = function () {
    let e = g("#gz-progress-container");
    let t = g("#gz-progress-bar");
    function i(e) {
      t.css("width", e + "%");
    }
    function o() {
      e.show();
      i(10);
      setTimeout(() => i(70), 300);
    }
    function a() {
      i(100);
      setTimeout(() => e.hide(), 500);
    }
    g(document.body).on("glozin_progress_bar_start", function () {
      o();
    });
    g(document.body).on("glozin_progress_bar_update", function (e, t) {
      i(t);
    });
    g(document.body).on("glozin_progress_bar_complete", function () {
      a();
    });
  };
  f.lazyLoadVideo = function () {
    e();
    t();
    f.$body.on(
      "glozin_get_products_ajax_loaded glozin_products_filter_request_success",
      function () {
        e();
        t();
      }
    );
    function e() {
      var e = document.querySelectorAll(
        "video[src]:not([data-src]):not(.gz-lazy-video-processed)"
      );
      e.forEach(function (e) {
        if (e.src && e.src !== "") {
          e.dataset.src = e.src;
          e.removeAttribute("src");
        }
        if (e.poster && e.poster !== "") {
          e.dataset.poster = e.poster;
          e.removeAttribute("poster");
        }
        var t = e.querySelectorAll("source[src]");
        t.forEach(function (e) {
          e.dataset.src = e.src;
          e.removeAttribute("src");
        });
        e.classList.add("gz-lazy-video");
        e.classList.add("gz-lazy-video-processed");
      });
    }
    function t() {
      var e = document.querySelectorAll("video[data-src], video.gz-lazy-video");
      if (!e.length) return;
      var t = { root: null, rootMargin: "200px", threshold: 0.1 };
      var i = new IntersectionObserver(function (e, o) {
        e.forEach(function (e) {
          if (e.isIntersecting) {
            var t = e.target;
            t.classList.add("gz-video-loading");
            if (t.dataset.src) {
              t.src = t.dataset.src;
              t.removeAttribute("data-src");
            }
            if (t.dataset.poster) {
              t.poster = t.dataset.poster;
              t.removeAttribute("data-poster");
            }
            var i = t.querySelectorAll("source[data-src]");
            i.forEach(function (e) {
              e.src = e.dataset.src;
              e.removeAttribute("data-src");
            });
            t.preload = "auto";
            t.load();
            t.addEventListener("loadeddata", function e() {
              t.classList.remove("gz-video-loading");
              t.classList.add("gz-video-loaded");
              if (t.hasAttribute("autoplay")) {
                t.play().catch(function (e) {
                  console.log("Autoplay prevented:", e);
                });
              }
              f.$body.trigger("glozin_lazy_load_video_loaded", [t]);
              t.removeEventListener("loadeddata", e);
            });
            o.unobserve(t);
          }
        });
      }, t);
      e.forEach(function (e) {
        i.observe(e);
      });
    }
  };
  f.glozinSwiper = function () {
    var e = g(".glozin-swiper");
    if (!e.length) return;
    e.each(function () {
      if (g(this).get(0).swiper) {
        return;
      }
      var e = g(this);
      var t = e.data("swiper");
      var i =
        t && t.breakpoints && t.breakpoints.desktop > 1025
          ? t.breakpoints.desktop
          : 1025;
      if (e.hasClass("glozin-product-carousel")) {
        e.find("ul.products").addClass("swiper-wrapper");
        e.find("li.product").addClass("swiper-slide");
      }
      var o = {
        loop: (t && t.loop) || false,
        autoplay: (t && t.autoplay) || false,
        speed: (t && t.speed) || 800,
        watchOverflow: true,
        navigation: {
          nextEl: e.find(".swiper-button-next").get(0),
          prevEl: e.find(".swiper-button-prev").get(0),
        },
        pagination: {
          el: e.find(".swiper-pagination").get(0),
          type: "bullets",
          clickable: true,
        },
        spaceBetween:
          (t && t.spaceBetween && parseInt(t.spaceBetween.desktop)) || 30,
        breakpoints: {
          0: {
            slidesPerView:
              (t && t.slidesPerView && parseInt(t.slidesPerView.mobile)) || 1,
            slidesPerGroup:
              (t && t.slidesPerGroup && parseInt(t.slidesPerGroup.mobile)) || 1,
            spaceBetween:
              (t && t.spaceBetween && parseInt(t.spaceBetween.mobile)) || 15,
          },
          768: {
            slidesPerView:
              (t && t.slidesPerView && parseInt(t.slidesPerView.tablet)) || 2,
            slidesPerGroup:
              (t && t.slidesPerGroup && parseInt(t.slidesPerGroup.tablet)) || 1,
            spaceBetween:
              (t && t.spaceBetween && parseInt(t.spaceBetween.tablet)) || 30,
          },
          [i]: {
            slidesPerView:
              (t && t.slidesPerView && parseInt(t.slidesPerView.desktop)) || 3,
            slidesPerGroup:
              (t && t.slidesPerGroup && parseInt(t.slidesPerGroup.desktop)) ||
              1,
            spaceBetween:
              (t && t.spaceBetween && parseInt(t.spaceBetween.desktop)) || 30,
          },
        },
        on: { init: a, slideChangeTransitionEnd: n },
      };
      if (t && t.slidesPerViewAuto) {
        if (t.slidesPerViewAuto.mobile) {
          o.breakpoints[0].slidesPerView = 1.5;
        }
      }
      new Swiper(e.get(0), o);
    });
    function a() {
      e.find("ul.products").attr("role", "list");
      e.find("li.product").attr("role", "listitem");
      n();
    }
    function n() {
      if (!e.hasClass("gz-arrows-middle")) {
        return;
      }
      e.find(".swiper-button-next, .swiper-button-prev").each(function () {
        let i = g(this)
          .closest(".gz-arrows-middle")
          .find(
            ".gz-arrows-middle__image, .product-thumbnail .woocommerce-loop-product__link img"
          );
        if (i.length) {
          let e = i.height();
          let t = e / 2;
          g(this).get(0).style.setProperty("--gz-arrow-top", `${t}px`);
        }
      });
    }
  };
  f.loadMorePosts = function () {
    if (g(".glozin-pagination--blog").hasClass("glozin-pagination--infinite")) {
      var e = false,
        t;
      g(window).on("scroll", function () {
        if (e) {
          return;
        }
        e = true;
        clearTimeout(t);
        i();
        setTimeout(function () {
          e = false;
        }, 100);
        t = setTimeout(function () {
          e = false;
          i();
        }, 200);
      });
    }
    function i() {
      var e = g(".glozin-pagination--blog.glozin-pagination--ajax"),
        t = g("a", e);
      if (glozinIsVisible(t) && t.length && !t.hasClass("loading")) {
        t.addClass("loading");
        o(t);
      }
    }
    g(document.body).on(
      "click",
      ".glozin-pagination--blog.glozin-pagination--loadmore a",
      function (e) {
        e.preventDefault();
        if (g(this).hasClass("loading")) {
          return;
        }
        g(this).addClass("loading");
        o(g(this));
      }
    );
    function o(r) {
      var e = r.closest("#primary").find("#main"),
        s = e.children(".hentry").length,
        d = r.closest(".glozin-pagination"),
        l = r.attr("href"),
        c = g(".gz-posts-found");
      g(document.body).trigger("glozin_progress_bar_start");
      g.get(l, function (e) {
        var t = g("#main", e),
          i = g(".hentry", t),
          o = i.length + s,
          a = g(".next-posts-pagination", t.parent());
        i.addClass("gz-fadeinup gz-animated");
        let n = 0.5;
        i.each(function (e, t) {
          g(t).css("--gz-fadeinup-delay", n + "s");
          n = n + 0.1;
        });
        if (d.siblings("#main").length) {
          i.appendTo(d.siblings("#main"));
        } else {
          i.insertBefore(c);
        }
        if (a.length) {
          r.replaceWith(g("a", a));
        } else {
          r.fadeOut();
        }
        if (i.hasClass("gz-animated")) {
          setTimeout(function () {
            i.removeClass("gz-animated");
          }, 10);
        }
        r.removeClass("loading");
        c.find(".current-post").html(" " + o);
        f.postFound();
        g(document.body).trigger("glozin_progress_bar_complete");
        if (glozinData.blog_nav_ajax_url_change) {
          window.history.pushState(null, "", l);
        }
      });
    }
  };
  f.postFound = function (e) {
    var t = g(".gz-posts-found__inner"),
      i = t.find(".count-bar"),
      o = t.find(".current-post").html(),
      a = t.find(".found-post").html(),
      n = (o / a) * 100;
    i.css("width", n + "%");
  };
  f.lazyLoadImage = function () {
    e();
    f.$body.on(
      "glozin_get_products_ajax_loaded glozin_products_filter_request_success added_to_cart wc_fragments_refreshed wc_fragments_loaded",
      function () {
        e();
      }
    );
    function e() {
      var e = f.$body.find(".gz-lazy-load-image"),
        t = e.parent();
      t.each(function () {
        g(this).imagesLoaded(function () {
          t.closest(".gz-lazy-load").removeClass("gz-lazy-load");
          t.trigger("glozin_lazy_load_image_loaded");
        });
      });
    }
  };
  f.productAttribute = function () {
    f.$body.on("click", ".product-variation-item", function (e) {
      e.preventDefault();
      if (g(this).hasClass("selected")) {
        return;
      }
      if (
        !g(this)
          .closest(".product-variation-items")
          .hasClass("gz-variation-hover")
      ) {
        return;
      }
      var t = g(this).closest(".product-inner").find(".product-thumbnail");
      g(this).siblings(".product-variation-item").removeClass("selected");
      g(this).addClass("selected");
      var i = g(this).data("product_variations"),
        o = t.find(".woocommerce-LoopProduct-link").first(),
        a = o.find("img").first();
      o.addClass("image-loading");
      if (i && i.img_src !== "undefined" && i.img_src) {
        a.attr("src", i.img_src);
        o.closest(".product-thumbnail")
          .find(".product-video-loop-thumbnail")
          .addClass("hidden");
      }
      if (i && i.img_srcset !== "undefined" && i.img_srcset) {
        a.attr("srcset", i.img_srcset);
      }
      if (i && i.img_original !== "undefined" && i.img_original) {
        a.closest("a").attr("data-zoom", i.img_original);
        a.attr("data-zoom", i.img_original);
      }
      a.load(function () {
        o.removeClass("image-loading");
      });
    });
    f.$body
      .on("mouseover", ".product-variation-items", function (e) {
        e.preventDefault();
        g(this)
          .closest(".product-inner")
          .find(".product-thumbnail")
          .addClass("hover-swatch");
      })
      .on("mouseout", ".product-variation-items", function (e) {
        e.preventDefault();
        g(this)
          .closest(".product-inner")
          .find(".product-thumbnail")
          .removeClass("hover-swatch");
      });
  };
  f.instantSearch = function () {
    var a = g("#search-modal");
    if (a.hasClass("search-type-sidebar")) {
      setTimeout(function () {
        a.find(".swiper").each(function () {
          if (g(this).length > 0) {
            if (g(this).get(0).swiper) {
              g(this).get(0).swiper.destroy();
            }
            g(this).addClass("destroy-swiper");
          }
        });
      }, 1);
      f.$body.on("glozin_ajax_search_request_success", function () {
        f.lazyLoadImage();
        a.find(".swiper").addClass("destroy-swiper");
      });
    }
    if (a.hasClass("search-type-popup")) {
      if (a.hasClass("modal-to-form")) {
        f.$body.on("click", function (e) {
          if (f.$window.width() < 1200) {
            return;
          }
          if (
            g(e.target).hasClass("search-modal") ||
            g(e.target).closest(".search-modal").length ||
            g(e.target).data("target") == "search-modal" ||
            g(e.target).closest('[data-target="search-modal"]').length
          ) {
            return;
          }
          if (a.hasClass("modal--open")) {
            f.closeModal(a);
          }
        });
      }
      setTimeout(function () {
        if (f.$window.width() < 1200) {
          a.find(".swiper").each(function () {
            if (g(this).length > 0 && g(this).get(0).swiper) {
              g(this).get(0).swiper.destroy();
              g(this).addClass("destroy-swiper");
            }
          });
        }
      }, 1);
      f.$body.on("glozin_ajax_search_request_success", function () {
        f.lazyLoadImage();
        if (f.$window.width() > 1199) {
          f.glozinSwiper();
        } else {
          a.find(".swiper").addClass("destroy-swiper");
        }
      });
      f.$window
        .on("resize", function () {
          if (f.$window.width() < 1200) {
            a.find(".swiper").each(function () {
              if (g(this).length > 0) {
                if (g(this).get(0).swiper) {
                  g(this).get(0).swiper.destroy();
                }
                g(this).addClass("destroy-swiper");
              }
            });
          } else {
            var e = false;
            a.find(".swiper").each(function () {
              if (g(this).hasClass("destroy-swiper")) {
                g(this).removeClass("destroy-swiper");
                e = true;
              }
            });
            if (e) {
              f.glozinSwiper();
            }
          }
        })
        .trigger("resize");
    }
    g(document.body).on("click", '[data-target="search-modal"]', function () {
      if (f.$window.width() > 1199) {
        if (a.hasClass("search-type-popup") && a.hasClass("modal-to-form")) {
          var e = 0,
            t = document.querySelector(".site-header__desktop"),
            i = document.querySelector(".header-main"),
            o = document.querySelector(".header-bottom");
          e = t.getBoundingClientRect().top + t.offsetHeight;
          if (g(".site-header__desktop").hasClass("minimized")) {
            if (
              g(".site-header__desktop")
                .find(".header-main")
                .hasClass("header-sticky")
            ) {
              e = i.getBoundingClientRect().top + i.offsetHeight;
            }
            if (
              g(".site-header__desktop")
                .find(".header-bottom")
                .hasClass("header-sticky")
            ) {
              e = o.getBoundingClientRect().top + o.offsetHeight;
            }
          }
          a.css("--gz-modal-top-spacing", e + "px");
        }
      }
    });
    g(document.body).on("glozin_modal_opened", function () {
      a.find(".swiper-button-next, .swiper-button-prev").each(function () {
        let i = g(this)
          .closest(".gz-arrows-middle")
          .find(
            ".gz-arrows-middle__image, .product-thumbnail .woocommerce-loop-product__link img"
          );
        if (i.length) {
          let e = i.height();
          let t = e / 2;
          g(this).get(0).style.setProperty("--gz-arrow-top", `${t}px`);
        }
      });
    });
  };
  f.formFieldFocus = function () {
    if (
      !g(
        ".woocommerce-account, .wpcf7-form, .wapf-field-container, .cart-panel"
      ).length
    ) {
      return;
    }
    g(".woocommerce-account, .wpcf7-form, .wapf-field-container, .cart-panel")
      .on(
        "keyup focus change",
        ".woocommerce-form-row .input-text, .wpcf7-form-control, .wapf-input",
        function () {
          g(this)
            .closest(
              ".woocommerce-form-row, .wpcf7-form-row, .wapf-field-container"
            )
            .addClass("focused");
        }
      )
      .on(
        "blur",
        ".woocommerce-form-row .input-text, .wpcf7-form-control, .wapf-input",
        function () {
          if (g(this).val() === "") {
            g(this)
              .closest(
                ".woocommerce-form-row, .wpcf7-form-row, .wapf-field-container"
              )
              .removeClass("focused");
          }
        }
      )
      .find(".woocommerce-form-row, .wpcf7-form-row, .wapf-field-container")
      .each(function () {
        var t = g(this).find(".input-text, .wpcf7-form-control, .wapf-input");
        if (t.val() !== "") {
          g(this).addClass("focused");
        }
        t.on("animationstart", function (e) {
          if (e.originalEvent.animationName === "autofill-animation") {
            t.closest(
              ".woocommerce-form-row, .wpcf7-form-row, .wapf-field-container"
            ).addClass("focused");
          }
        });
      })
      .on("click", ".showlogin", function () {
        g(this)
          .closest(".woocommerce")
          .find(".gz-button-login-mode")
          .trigger("click");
      });
    f.$window.on("load", function () {
      g(
        ".woocommerce-account .woocommerce-form-row .input-text, .wpcf7-form .wpcf7-form-control, .wapf-field-container .wapf-input, .cart-panel .input-text"
      ).each(function () {
        if (g(this).val().length !== 0) {
          g(this)
            .closest(
              ".woocommerce-form-row, .wpcf7-form-row, .wapf-field-container, .cart-panel"
            )
            .addClass("focused");
        }
      });
    });
  };
  f.loginPopup = function () {
    var t = g("#login-modal");
    t.on("click", ".gz-button-register-mode", function (e) {
      e.preventDefault();
      t.find(".woocommerce-customer-login").removeClass("active");
      t.find(".woocommerce-customer-register").addClass("active");
    }).on("click", ".gz-button-login-mode", function (e) {
      e.preventDefault();
      t.find(".woocommerce-customer-login").addClass("active");
      t.find(".woocommerce-customer-register").removeClass("active");
    });
  };
  f.loginModalAuthenticate = function () {
    var l = g("#login-modal"),
      c = null;
    l.on("submit", "form.login", function e(t) {
      var i = g("input[name=rememberme]", this).is(":checked"),
        o = g("input[name=woocommerce-login-nonce]", this).val();
      var a = { action: "login_modal_authenticate", security: o, remember: i };
      n(this, a, t);
    });
    l.on("submit", "form.register", function e(t) {
      var i = g("input[name=woocommerce-register-nonce]", this).val();
      var o = { action: "register_modal_authenticate", security: i };
      n(this, o, t);
    });
    function n(e, t, i) {
      var o = g("input[name=username]", e).val(),
        a = g("input[name=password]", e).val(),
        n = g("input[name=email]", e).val(),
        r = g("[type=submit]", e),
        s = g(e);
      if (s.find("input[name=username]").length) {
        if (!o) {
          s.find("input[name=username]").focus();
          return false;
        }
      }
      if (s.find("input[name=email]").length) {
        if (!n) {
          s.find("input[name=email]").focus();
          return false;
        }
      }
      if (s.find("input[name=password]").length) {
        if (!a) {
          s.find("input[name=password]").focus();
          return false;
        }
      }
      if (s.data("validated")) {
        return true;
      }
      if (c) {
        c.abort();
      }
      var d = s.serializeArray();
      d.forEach(function (e) {
        t[e.name] = e.value;
      });
      l.find(".login-modal-notices").remove();
      r.addClass("loading");
      g(document.body).trigger("glozin_progress_bar_start");
      c = g.post(glozinData.admin_ajax_url, t, function (e) {
        if (!e.success) {
          var t =
            '<div class="login-modal-notices woocommerce-error">' +
            e.data +
            "</div>";
          l.find(".modal__content").append(t);
          r.removeClass("loading");
        } else {
          var t =
            '<div class="login-modal-notices woocommerce-info">' +
            e.data +
            "</div>";
          l.find(".modal__content").append(t);
          r.removeClass("loading");
          setTimeout(function () {
            s.data("validated", true).trigger("submit");
          }, 1500);
        }
        g(document.body).trigger("glozin_progress_bar_complete");
      });
      i.preventDefault();
    }
  };
  f.registerPopup = function () {
    g("#header-account-register").on("click", function (e) {
      e.preventDefault();
      var t = g("#login-modal");
      t.find(".woocommerce-customer-login").removeClass("active");
      t.find(".woocommerce-customer-register").addClass("active");
    });
    g(document).on("click", function (e) {
      var t = g("#login-modal");
      if (
        !t.is(e.target) &&
        t.has(e.target).length === 0 &&
        !g("#header-account-register").is(e.target)
      ) {
        t.find(".woocommerce-customer-register").removeClass("active");
        t.find(".woocommerce-customer-login").addClass("active");
      }
    });
  };
  f.productQuantityNumber = function () {
    var s = null;
    f.$body.on("click", ".glozin-qty-button", function (e) {
      e.preventDefault();
      var t = g(this),
        i = t.siblings(".qty"),
        o = 0,
        a = parseFloat(i.attr("min")),
        n = parseFloat(i.attr("max")),
        r = parseFloat(i.attr("step"));
      if (i.val() !== "") {
        o = parseFloat(i.val());
      } else if (i.attr("placeholder") !== "") {
        o = parseFloat(i.attr("placeholder"));
      }
      a = a ? a : 0;
      n = n ? n : o + 1;
      if (t.hasClass("decrease") && o > a) {
        i.val(o - r);
      }
      if (t.hasClass("increase") && o < n) {
        i.val(o + r);
      }
      if (s) {
        clearTimeout(s);
      }
      s = setTimeout(function () {
        i.trigger("change");
      }, 500);
    });
  };
  f.productQuickView = function () {
    g(document.body).on("click", ".glozin-quickview-button", function (e) {
      e.preventDefault();
      var t = g(this),
        i = t.data("product_id"),
        o = g("#" + t.data("target")),
        a = o.find(".woocommerce"),
        n = glozinData.ajax_url
          .toString()
          .replace("%%endpoint%%", "product_quick_view");
      o.addClass("loading");
      t.addClass("loading");
      a.find(".product-quickview").html("");
      g(document.body).trigger("glozin_progress_bar_start");
      g.post(
        n,
        {
          action: "glozin_get_product_quickview",
          product_id: i,
          security: glozinData.product_quickview_nonce,
        },
        function (e) {
          a.find(".product-quickview").replaceWith(e.data);
          d(g(".product-quickview").find(".short-description__more"));
          if (e.success) {
            r();
          }
          t.removeClass("loading");
          o.removeClass("loading");
          if (!o.hasClass("modal--open")) {
            f.openModal(o);
          }
          if (o.find(".size-guide-button").length == 1) {
            o.find(".size-guide-button").attr("data-modal", "no");
          }
          f.$body.trigger("glozin_product_quick_view_loaded");
          if (a.find(".glozin-countdown").length > 0) {
            g(document.body).trigger("glozin_countdown", [
              g(".glozin-countdown"),
            ]);
          }
          g(document.body).trigger("glozin_progress_bar_complete");
        }
      ).fail(function () {
        window.location.herf = t.attr("href");
      });
      function r() {
        var e = a.find(".product-quickview"),
          t = e.find(".woocommerce-product-gallery"),
          i = e.find(".variations_form");
        s();
        t.on("glozin_update_product_gallery_on_quickview", function () {
          s();
        });
        if (typeof wc_add_to_cart_variation_params !== "undefined") {
          i.each(function () {
            f.productVariation();
            g(this).wc_variation_form();
          });
        }
        g(document.body).trigger("init_variation_swatches");
      }
      function s() {
        var e = a.find(".product-quickview"),
          t = e.find(".woocommerce-product-gallery"),
          i = t.find(".woocommerce-product-gallery__wrapper");
        t.on("click", ".woocommerce-product-gallery__image a", function (e) {
          e.preventDefault();
        });
        if (i.find(".woocommerce-product-gallery__image").length > 1) {
          i.addClass(
            "woocommerce-product-gallery__slider swiper slides-per-view-auto--mobile no-space-end"
          );
          if (glozinData.mobile_single_product_gallery_arrows) {
            i.closest(".woocommerce-product-gallery").addClass(
              "woocommerce-product-gallery--has-arrows-mobile"
            );
          }
          i.css({
            "--gz-swiper-auto-width-mobile": "64%",
            "--gz-swiper-auto-fluid-end-mobile": "10px",
          });
          i.attr("data-mobile", "1");
          i.wrapInner('<div class="swiper-wrapper"></div>');
          i.find(".swiper-wrapper").after(
            '<span class="glozin-svg-icon glozin-svg-icon__inline glozin-svg-icon--icon-back swiper-button-prev swiper-button"><svg width="24" height="24" aria-hidden="true" role="img" focusable="false"> <use href="#icon-back" xlink:href="#icon-back"></use> </svg></span>'
          );
          i.find(".swiper-wrapper").after(
            '<span class="glozin-svg-icon glozin-svg-icon__inline glozin-svg-icon--icon-next swiper-button-next swiper-button"><svg width="24" height="24" aria-hidden="true" role="img" focusable="false"> <use href="#icon-next" xlink:href="#icon-next"></use> </svg></span>'
          );
          i.find(".swiper-wrapper").after(
            '<div class="swiper-fraction d-inline-flex d-none-md position-absolute bottom-15 end-15 pe-none z-2 py-8 px-17 border text-dark bg-light rounded-30 lh-1"></div>'
          );
          i.find(".woocommerce-product-gallery__image").addClass(
            "swiper-slide"
          );
          var o = {
            loop: false,
            autoplay: false,
            speed: 800,
            watchOverflow: true,
            autoHeight: true,
            navigation: {
              nextEl: i.find(".swiper-button-next").get(0),
              prevEl: i.find(".swiper-button-prev").get(0),
            },
            pagination: {
              el: i.find(".swiper-fraction").get(0),
              type: "fraction",
              modifierClass: "swiper-pagination--",
            },
            on: {
              init: function () {
                t.css("opacity", 1);
                f.$body.trigger("glozin_product_gallery_quickview_init");
              },
              slideChangeTransitionEnd: function () {
                f.$body.trigger(
                  "glozin_product_gallery_quickview_slideChangeTransitionEnd"
                );
              },
            },
            breakpoints: {
              0: { slidesPerView: 1.5, spaceBetween: 15 },
              768: { slidesPerView: 1, spaceBetween: 30 },
            },
          };
          new Swiper(i.get(0), o);
        } else {
          t.css("opacity", 1);
        }
      }
      function d(e) {
        if (e.length === 0) {
          return;
        }
        var t = e.data("settings"),
          i = t.more,
          o = t.less;
        if (e.hasClass("less")) {
          e.removeClass("less");
          e.text(i);
          e.siblings(".short-description__content").css(
            "-webkit-line-clamp",
            ""
          );
        } else {
          e.addClass("less");
          e.text(o);
          e.siblings(".short-description__content").css(
            "-webkit-line-clamp",
            "inherit"
          );
        }
      }
    });
  };
  f.productSaleMarquee = function () {
    var e = g(".glozin-sale-flash-marquee");
    if (!e.length) {
      return;
    }
    e.each(function () {
      var n = g(this);
      if (n.hasClass("gz-marquee-initialized")) {
        return;
      }
      n.addClass("gz-marquee-initialized");
      n.closest("li.product").addClass("glozin-sale-flash-marquee--enabled");
      var r = n.find(".glozin-marquee__inner"),
        s = n.find(".glozin-marquee__items");
      r.imagesLoaded(function () {
        var t,
          i =
            (parseInt(Math.ceil(jQuery(window).width() / s.outerWidth(true))) ||
              0) + 1,
          e = n.data("speed"),
          o = (1 / parseFloat(e)) * (s.outerWidth(true) / 350);
        r.css("--gz-marquee-speed", o + "s");
        for (let e = 1; e <= i; e++) {
          t = s.clone();
          t.addClass("glozin-marquee--duplicate");
          t.css("--gz-marquee-index", e.toString());
          t.attr("data-index", e);
          t.appendTo(r);
        }
        const a = r.find(".glozin-marquee--original").data("id");
        r.find(".glozin-marquee--duplicate").each(function () {
          const e = g(this);
          if (e.data("id") !== a) {
            e.remove();
          }
        });
      });
    });
  };
  f.openMiniCartPanel = function () {
    if (typeof glozinData.added_to_cart_notice === "undefined") {
      return;
    }
    if (
      glozinData.added_to_cart_notice.added_to_cart_notice_layout !== "mini"
    ) {
      return;
    }
    var t = false;
    g(document.body).on("adding_to_cart", function () {
      t = true;
      g("#cart-panel")
        .find(".glozin-mini-products-recommended")
        .removeClass("mini--open");
    });
    g(document.body).on("added_to_cart wc_fragments_refreshed", function () {
      if (t) {
        var e = false;
        if (
          g("#quick-view-modal").length &&
          g("#quick-view-modal").hasClass("modal--open")
        ) {
          f.closeModal("#quick-view-modal", true, 800);
          e = true;
        }
        if (e) {
          setTimeout(function () {
            f.openOffCanvas("#cart-panel");
          }, 800);
        } else {
          f.openOffCanvas("#cart-panel");
        }
        if (g("#cart-panel").find(".glozin-mini-products-recommended").length) {
          setTimeout(function () {
            if (g("#cart-panel").hasClass("offscreen-panel--open")) {
              g("#cart-panel")
                .find(".glozin-mini-products-recommended")
                .addClass("mini--open");
            }
          }, 1200);
        }
        f.glozinSwiper();
      }
    });
    g(document.body).on(
      "click",
      ".products-recommended__button-close",
      function () {
        g(this)
          .closest(".glozin-mini-products-recommended")
          .removeClass("mini--open");
      }
    );
    g(document.body).on("click", ".remove_from_cart_button", function () {
      if (
        g(this)
          .closest(".widget_shopping_cart_content")
          .find(".glozin-mini-products-recommended").length
      ) {
        g(this)
          .closest(".widget_shopping_cart_content")
          .find(".glozin-mini-products-recommended")
          .removeClass("mini--open");
      }
      f.glozinSwiper();
    });
    var i = false;
    g(document.body).on("removed_from_cart", function () {
      i = true;
    });
    g(document.body).on(
      "wc_fragments_loaded wc_fragments_refreshed",
      function () {
        if (
          g("#cart-panel").find(".glozin-mini-products-recommended").length &&
          i
        ) {
          setTimeout(function () {
            g("#cart-panel")
              .find(".glozin-mini-products-recommended")
              .addClass("mini--open");
            i = false;
          }, 500);
        }
        f.glozinSwiper();
        var e = g("#cart-panel").find("#mini-cart-shipping-calculator-items"),
          t = g("#cart-panel").find("#mini-cart-shipping-calculator-popover");
        if (e.length && t.length) {
          t.html(e.html());
          e.remove();
        }
      }
    );
  };
  f.updateCartQtyAuto = function () {
    g(document.body).on("change", "table.cart .qty", function () {
      if (
        typeof glozinData.update_cart_page_auto !== undefined &&
        glozinData.update_cart_page_auto == "1"
      ) {
        f.$body
          .find('button[name="update_cart"]')
          .attr("clicked", "true")
          .prop("disabled", false)
          .attr("aria-disabled", false);
        f.$body.find('button[name="update_cart"]').trigger("click");
      }
    });
  };
  f.productVariation = function () {
    var s = g("div.product .entry-summary .glozin-product-price"),
      o = g(".single-product div.product .entry-summary .variations_form"),
      d = g(".single-product div.product .entry-summary .short-description"),
      e = g(".single-product div.product .entry-summary .product_meta"),
      a = g(
        ".single-product div.product .entry-summary .woocommerce-badges--single"
      ),
      l = e.find(".stock"),
      c = g(
        ".single-product div.product .entry-summary .single_add_to_cart_button"
      ),
      n = [],
      t = g("#glozin-sticky-add-to-cart");
    if (!glozinData.product_clickable_outofstock_variations) {
      g(
        ".single-product div.product .entry-summary .variations_form:not(.product-select__variation)"
      ).on(
        "wc_variation_form woocommerce_update_variation_values",
        function () {
          if (
            o.length > 0 &&
            o.find("table.variations tbody .label").length == 1
          ) {
            var e = o.data("product_variations");
            if (e.length > 0) {
              for (var t = 0; t < e.length; t++) {
                if (!e[t].is_in_stock) {
                  var i = Object.values(e[t].attributes)
                    ? Object.values(e[t].attributes)[0]
                    : null;
                  if (i) {
                    if (
                      !o.find('li[data-value="' + i + '"]').hasClass("disabled")
                    ) {
                      n.push(i);
                    }
                  }
                }
              }
            }
          }
          setTimeout(function () {
            n.forEach(function (e) {
              o.find('li[data-value="' + e + '"]').addClass("disabled");
            });
          }, 20);
        }
      );
    }
    g(
      ".single-product div.product .entry-summary .variations_form:not(.product-select__variation)"
    ).on("found_variation", function (e, t) {
      var i = g(this)
        .closest("div.product")
        .find(".entry-summary .woocommerce-badges--single");
      if (i.length > 0) {
        if (t.badges_html) {
          var o = g(p(t.badges_html));
          if (o.find(".onsale").length) {
            if (i.find(".onsale").length) {
              if (i.find(".onsale").hasClass("hidden")) {
                i.find(".onsale").removeClass("hidden");
              }
              i.find(".onsale")
                .addClass("variation-badge")
                .wc_set_content(o.find(".onsale").text());
            } else {
              i.append(o.find(".onsale").clone());
            }
          } else {
            if (i.find(".onsale").length) {
              i.find(".onsale").addClass("hidden");
            }
          }
          if (o.find(".stock-badge").length) {
            if (i.find(".stock-badge").length) {
              if (i.find(".variation-stock").length) {
                i.find(".variation-stock").remove();
              }
              if (!i.find(".stock-badge").hasClass("hidden")) {
                i.find(".stock-badge").addClass("hidden");
              }
              i.find(".stock-badge").after(
                o.find(".stock-badge").addClass("variation-stock").clone()
              );
            } else {
              i.append(
                o.find(".stock-badge").addClass("variation-stock").clone()
              );
            }
          }
        } else {
          i.empty();
        }
      } else {
        if (t.badges_html) {
          var o = g(p(t.badges_html));
          if (o.length) {
            if (
              g(this)
                .closest("div.product")
                .find(".entry-summary .woocommerce-product-gallery").length
            ) {
              g(this)
                .closest("div.product")
                .find(".entry-summary .woocommerce-product-gallery")
                .after(o.clone());
            } else {
              g(this)
                .closest("div.product")
                .find(".entry-summary")
                .first()
                .prepend(o.clone());
            }
          }
        }
      }
      if (s.length > 0) {
        if (s.find(".variation-price").length > 0) {
          s.find(".variation-price").remove();
        }
        if (t.price_html) {
          s.find(".price").css("display", "none");
          s.append('<div class="variation-price">' + t.price_html + "</div>");
        } else {
          s.find(".price").css("display", "");
        }
      } else {
        s = g(this).closest(".entry-summary").find(".glozin-product-price");
        if (s.length > 0) {
          if (s.find(".variation-price").length > 0) {
            s.find(".variation-price").remove();
          }
          if (t.price_html) {
            s.find(".price").css("display", "none");
            s.append('<div class="variation-price">' + t.price_html + "</div>");
          } else {
            s.find(".price").css("display", "");
          }
        }
      }
      var a = g(this).closest(".variations_form");
      f.variations_image_update(t, a);
      if (d.length > 0) {
        if (d.find(".short-description__content-new").length > 0) {
          d.find(".short-description__content-new").remove();
        }
        if (t.description) {
          d.find(".short-description__content").css("display", "none");
          d.find(".short-description__content").after(
            '<div class="short-description__content short-description__content-new">' +
              t.description +
              "</div>"
          );
          u(d, "short-description__content-new");
        } else {
          d.find(".short-description__content").css("display", "");
        }
      }
      var n = g(this)
        .closest("div.product")
        .find(".entry-summary .gz-countdown-single-product");
      if (n.length) {
        var r = n.find(".glozin-countdown");
        if (
          t.countdown_expire &&
          r.attr("data-expire") !== t.countdown_expire
        ) {
          g(window).get(0).clearCountdownInterval(r.get(0));
          if (n.hasClass("hidden")) {
            n.removeClass("hidden");
          }
          r.attr("data-expire", t.countdown_expire);
          r.empty();
          r.glozin_countdown();
        } else {
          g(window).get(0).clearCountdownInterval(r.get(0));
          r.find(".glozin-countdown").empty();
          if (!n.hasClass("hidden")) {
            n.addClass("hidden");
          }
        }
      }
      if (l.length > 0) {
        if (t.availability_status) {
          l.wc_set_content(t.availability_status);
        } else {
          l.wc_reset_content();
        }
      }
      if (c.length > 0) {
        if (
          t.availability_status &&
          (!t.is_purchasable ||
            !t.is_in_stock ||
            !t.variation_is_visible ||
            (t.is_pre_order !== undefined && t.is_pre_order == "yes"))
        ) {
          c.wc_set_content(t.availability_status);
        } else {
          c.wc_reset_content();
        }
      }
    });
    g(
      ".single-product div.product .entry-summary .variations_form:not(.product-select__variation)"
    ).on("reset_data", function () {
      var e = g(this)
        .closest("div.product")
        .find(".entry-summary .woocommerce-badges--single");
      if (e.length > 0) {
        e.replaceWith(a.clone());
      } else {
        if (
          g(this)
            .closest("div.product")
            .find(".entry-summary .woocommerce-product-gallery").length
        ) {
          g(this)
            .closest("div.product")
            .find(".entry-summary .woocommerce-product-gallery")
            .after(a.clone());
        } else {
          g(this)
            .closest("div.product")
            .find(".entry-summary")
            .first()
            .prepend(a.clone());
        }
      }
      if (s.length > 0 && s.find(".variation-price").length > 0) {
        s.find(".variation-price").remove();
        s.find(".price").css("display", "");
      } else {
        s = g(this)
          .closest("div.product")
          .find(".entry-summary .glozin-product-price");
        if (s.length > 0 && s.find(".variation-price").length > 0) {
          s.find(".variation-price").remove();
          s.find(".price").css("display", "");
        }
      }
      if (
        d.length > 0 &&
        d.find(".short-description__content-new").length > 0
      ) {
        d.find(".short-description__content-new").remove();
        d.find(".short-description__content").css("display", "");
        u(d, "short-description__content");
      }
      var t = g(this)
        .closest("div.product")
        .find(".entry-summary .gz-countdown-single-product");
      if (t.length) {
        var i = t.find(".glozin-countdown").get(0);
        g(window).get(0).clearCountdownInterval(i);
        t.find(".glozin-countdown").empty();
        if (!t.hasClass("hidden")) {
          t.addClass("hidden");
        }
      }
      if (l.length > 0) {
        l.wc_reset_content();
      }
      if (c.length > 0) {
        c.wc_reset_content();
      }
      var o = g(this).closest(".variations_form");
      f.variations_image_reset(o);
    });
    function u(e, t) {
      e.find("." + t).each(function () {
        if (jQuery(this)[0].scrollHeight > jQuery(this)[0].clientHeight) {
          jQuery(this)
            .siblings(".short-description__more")
            .removeClass("hidden");
        } else {
          if (
            !jQuery(this)
              .siblings(".short-description__more")
              .hasClass("hidden")
          ) {
            jQuery(this)
              .siblings(".short-description__more")
              .addClass("hidden");
          }
        }
      });
    }
    function p(e) {
      var t = document.createElement("textarea");
      t.innerHTML = e;
      return t.value;
    }
  };
  f.variations_image_update = function (e, t) {
    var i = t.closest(".product"),
      o = i.find(
        ".woocommerce-product-gallery:not(.woocommerce-product-gallery__video)"
      ),
      a = o.find(".woocommerce-product-gallery__wrapper"),
      n = i.find(".glozin-product-gallery-thumbnails");
    if (e && e.image && e.image.src && e.image.src.length > 1) {
      var r =
        o.find(
          '.woocommerce-product-gallery__image[data-thumb="' +
            e.image.gallery_thumbnail_src +
            '"]'
        ).length > 0;
      if (r) {
        f.variations_image_reset(t);
      } else {
        f.set_variation_image(t, e);
      }
      if (
        f.$window.width() > 768 &&
        o.hasClass("woocommerce-product-gallery--grid")
      ) {
        if (!f.setVariationImageToGalleryGrid(a, n, t, e)) {
          return false;
        }
      } else if (a.hasClass("swiper")) {
        if (!f.setVariationImageToGallerySwiper(a, n, t, e)) {
          return false;
        }
      }
    } else {
      if (a.hasClass("swiper")) {
        a.get(0).swiper.slideTo(0);
      } else {
        f.variations_image_reset(t);
      }
    }
  };
  f.setVariationImageToGalleryGrid = function (e, t, i, o) {
    var a = e.find(
      '.woocommerce-product-gallery__image[data-thumb="' +
        o.image.gallery_thumbnail_src +
        '"]'
    );
    if (a.length > 0 && !g(a).is(":first-child")) {
      g("html, body").animate({ scrollTop: g(a).offset().top }, 0);
      i.attr("current-image", o.image_id);
      return false;
    }
    if (f.$window.scrollTop() > e.offset().top) {
      g("html, body").animate({ scrollTop: e.offset().top }, 0);
    }
    return true;
  };
  f.setVariationImageToGallerySwiper = function (e, t, i, o) {
    t = t.length > 0 ? t : e;
    var a = t.find(
      '.woocommerce-product-gallery__image[data-thumb="' +
        o.image.gallery_thumbnail_src +
        '"]'
    );
    if (a.length > 0) {
      var n = t.find(".woocommerce-product-gallery__image").index(a);
      e.get(0).swiper.slideTo(n);
      i.attr("current-image", o.image_id);
      return false;
    }
    e.get(0).swiper.slideTo(0);
    return true;
  };
  f.variations_image_reset = function (e) {
    var t = e.closest(".product"),
      i = t.find(
        ".woocommerce-product-gallery:not(.woocommerce-product-gallery__video)"
      ),
      o = i.find(".woocommerce-product-gallery__wrapper"),
      a = t.find(".glozin-product-gallery-thumbnails"),
      n = a.find(".woocommerce-product-gallery__image:eq(0) img"),
      r = i
        .find(
          ".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder"
        )
        .eq(0),
      s = r.find(".wp-post-image"),
      d = r.find("a").eq(0);
    if (o.hasClass("swiper")) {
      o.get(0).swiper.slideTo(0);
    }
    s.wc_reset_variation_attr("src");
    s.wc_reset_variation_attr("width");
    s.wc_reset_variation_attr("height");
    s.wc_reset_variation_attr("srcset");
    s.wc_reset_variation_attr("sizes");
    s.wc_reset_variation_attr("title");
    s.wc_reset_variation_attr("data-caption");
    s.wc_reset_variation_attr("alt");
    s.wc_reset_variation_attr("data-src");
    s.wc_reset_variation_attr("data-large_image");
    s.wc_reset_variation_attr("data-large_image_width");
    s.wc_reset_variation_attr("data-large_image_height");
    r.wc_reset_variation_attr("data-thumb");
    n.wc_reset_variation_attr("src");
    n.wc_reset_variation_attr("srcset");
    n.wc_reset_variation_attr("sizes");
    n.wc_reset_variation_attr("data-large_image_width");
    n.wc_reset_variation_attr("data-large_image_height");
    n.wc_reset_variation_attr("data-large_image");
    n.wc_reset_variation_attr("title");
    n.wc_reset_variation_attr("data-caption");
    n.wc_reset_variation_attr("alt");
    n.wc_reset_variation_attr("data-src");
    d.wc_reset_variation_attr("href");
  };
  f.set_variation_image = function (e, t) {
    var i = e.closest(".product"),
      o = i.find(
        ".woocommerce-product-gallery:not(.woocommerce-product-gallery__video)"
      ),
      a = i.find(".glozin-product-gallery-thumbnails"),
      n = a.find(".woocommerce-product-gallery__image:eq(0) img"),
      r = o
        .find(
          ".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder"
        )
        .eq(0),
      s = r.find(".wp-post-image"),
      d = r.find("a").eq(0);
    s.wc_set_variation_attr("src", t.image.src);
    s.wc_set_variation_attr("height", t.image.src_h);
    s.wc_set_variation_attr("width", t.image.src_w);
    s.wc_set_variation_attr("srcset", t.image.srcset);
    s.wc_set_variation_attr("sizes", t.image.sizes);
    s.wc_set_variation_attr("title", t.image.title);
    s.wc_set_variation_attr("data-caption", t.image.caption);
    s.wc_set_variation_attr("alt", t.image.alt);
    s.wc_set_variation_attr("data-src", t.image.full_src);
    s.wc_set_variation_attr("data-large_image", t.image.full_src);
    s.wc_set_variation_attr("data-large_image_width", t.image.full_src_w);
    s.wc_set_variation_attr("data-large_image_height", t.image.full_src_h);
    r.wc_set_variation_attr("data-thumb", t.image.gallery_thumbnail_src);
    n.wc_set_variation_attr("src", t.image.gallery_thumbnail_src);
    n.wc_set_variation_attr("srcset", t.image.gallery_thumbnail_src);
    n.wc_set_variation_attr("sizes", t.image.sizes);
    n.wc_set_variation_attr("data-large_image_width", t.image.full_src_w);
    n.wc_set_variation_attr("data-large_image_height", t.image.full_src_h);
    n.wc_set_variation_attr("data-large_image", t.image.full_src);
    n.wc_set_variation_attr("title", t.image.title);
    n.wc_set_variation_attr("data-caption", t.image.caption);
    n.wc_set_variation_attr("alt", t.image.alt);
    n.wc_set_variation_attr("data-src", t.image.full_src);
    d.wc_set_variation_attr("href", t.image.full_src);
  };
  f.updateMiniCartQtyAuto = function () {
    var t = null;
    g(document.body).on("change", ".woocommerce-mini-cart .qty", function () {
      var e = g(this);
      if (t) {
        clearTimeout(t);
      }
      t = setTimeout(function () {
        f.updateCartAJAX(e);
      }, 500);
    });
  };
  f.updateMiniCartContent = function () {
    e();
    g(window).on("resize", e);
    function e() {
      var e = g("#cart-panel .glozin-free-shipping-bar"),
        t = g("#cart-panel .panel__header"),
        i = 0,
        o = g("#cart-panel .widget_shopping_cart_content");
      if (e.length) {
        i = e.outerHeight();
      }
      o.css("--gz-shopping-cart-content-offset", i + t.outerHeight() + "px");
    }
  };
  f.removeItemFromMiniCart = function () {
    g(document.body).on("click", ".woocommerce-mini-cart .remove", function () {
      g(document.body).trigger("glozin_progress_bar_start");
      g(this).addClass("loading");
    });
    g(document.body).on("removed_from_cart", function () {
      g(document.body).trigger("glozin_progress_bar_complete");
    });
  };
  f.applyCoupon = function () {
    g(document.body).on(
      "click",
      '.discount-popover [name="apply_coupon"]',
      function (e) {
        e.preventDefault();
        var t = g(this).closest("form"),
          i = {
            action: "glozin_apply_coupon",
            coupon_code: t.find('[name="coupon_code"]').val(),
          },
          o = g(this),
          a = g(this)
            .closest(".popover__content")
            .find(".woocommerce-notices-wrapper");
        if (o.data("requestRunning")) {
          return;
        }
        o.data("requestRunning", true);
        o.addClass("loading");
        g.ajax({
          type: "POST",
          url: wc_add_to_cart_params.wc_ajax_url
            .toString()
            .replace("%%endpoint%%", "glozin_apply_coupon"),
          data: i,
          success: function (e) {
            if (e.notices) {
              a.html(e.notices);
            }
            if (e.coupon_html) {
              if (
                o.closest(".popover__content").find(".glozin-mini-cart-coupons")
                  .length
              ) {
                o.closest(".popover__content")
                  .find(".glozin-mini-cart-coupons")
                  .html(e.coupon_html);
              } else {
                o.closest(".popover__content")
                  .find("form")
                  .before(
                    '<div class="glozin-mini-cart-coupons mb-15 d-flex flex-column gap-5">' +
                      e.coupon_html +
                      "</div>"
                  );
              }
            }
            o.removeClass("loading");
            o.data("requestRunning", false);
          },
        });
      }
    );
    g(document.body).on(
      "click",
      ".discount-popover .woocommerce-remove-coupon",
      function (e) {
        e.preventDefault();
        var t = g(this),
          i = { action: "glozin_remove_coupon", coupon_code: t.data("coupon") };
        if (t.data("requestRunning")) {
          return;
        }
        t.data("requestRunning", true);
        g.ajax({
          type: "POST",
          url: wc_add_to_cart_params.wc_ajax_url
            .toString()
            .replace("%%endpoint%%", "glozin_remove_coupon"),
          data: i,
          success: function (e) {
            if (t.closest(".glozin-mini-cart-coupons").length > 0) {
              t.closest(".cart-discount").remove();
            } else {
              t.closest(".glozin-mini-cart-coupons").remove();
            }
            t.data("requestRunning", false);
          },
        });
      }
    );
    g(document.body).on("glozin_off_canvas_closed", function (e) {
      if (
        g(e.target).hasClass("discount-popover-opened") ||
        g(e.target).hasClass("note-popover-opened") ||
        g(e.target).hasClass("estimate-popover-opened")
      ) {
        f.closePopover();
      }
    });
  };
  f.updateShippingAddress = function () {
    g(document.body).on(
      "click",
      '.estimate-popover [name="calc_shipping"]',
      function (e) {
        e.preventDefault();
        var t = g(this),
          i = t.closest("form"),
          o = i.serializeArray(),
          a = i.find(".woocommerce-notices-wrapper");
        o.push({ name: "action", value: "glozin_update_shipping_address" });
        if (t.data("requestRunning")) {
          return;
        }
        t.data("requestRunning", true);
        t.addClass("loading");
        g.ajax({
          type: "POST",
          url: wc_add_to_cart_params.wc_ajax_url
            .toString()
            .replace("%%endpoint%%", "glozin_update_shipping_address"),
          data: o,
          success: function (e) {
            a.html(e.notices);
            t.removeClass("loading");
            t.data("requestRunning", false);
          },
        });
      }
    );
  };
  f.productQuickEdit = function () {
    g(document.body).on("click", ".glozin-quickedit-button", function (e) {
      e.preventDefault();
      var t = g(this),
        i = t.data("cart_item_key"),
        o = t.data("position"),
        a = g("#quick-edit-modal"),
        n = a.find(".woocommerce"),
        r = glozinData.ajax_url
          .toString()
          .replace("%%endpoint%%", "product_quick_edit");
      t.addClass("loading");
      n.find(".product-quickedit").html("");
      g(document.body).trigger("glozin_progress_bar_start");
      g.post(r, { cart_item_key: i, position: o }, function (e) {
        n.find(".product-quickedit").html(e.data);
        if (e.success) {
          s();
          f.openModal(a);
        }
        t.removeClass("loading");
        g(document.body).trigger("glozin_progress_bar_complete");
      }).fail(function () {
        window.location.herf = t.attr("href");
      });
      function s() {
        var e = n.find(".product-quickedit"),
          t = e.find(".variations_form");
        if (typeof wc_add_to_cart_variation_params !== "undefined") {
          t.each(function () {
            d();
            g(this).wc_variation_form();
          });
        }
        g(document.body).trigger(
          "init_variation_swatches.wcboost-variation-swatches"
        );
      }
    });
    g(document.body).on(
      "click",
      ".quick_edit_add_to_cart_button",
      function (e) {
        e.preventDefault();
        var t = g(this);
        if (!t.closest("form").hasClass("edit-cart-form")) {
          return;
        }
        if (t.is(".disabled")) {
          return;
        }
        if (t.data("requestRunning")) {
          return;
        }
        t.data("requestRunning", true);
        t.removeClass("added");
        t.addClass("loading");
        var i = t.closest("form").serializeArray(),
          o = t.closest("form").attr("action"),
          a = glozinData.ajax_url
            .toString()
            .replace("%%endpoint%%", "quick_edit_update_cart_item");
        g(document.body).trigger("adding_to_cart", [t, i]);
        g(document.body).trigger("glozin_progress_bar_start");
        g.ajax({
          url: a,
          method: "post",
          data: i,
          error: function (e) {
            window.location = o;
          },
          success: function (e) {
            if (e && !e.error) {
              g(document.body).trigger("added_to_cart", [
                e.fragments,
                e.cart_hash,
                t,
              ]);
            }
            t.removeClass("loading");
            t.data("requestRunning", false);
            f.closeModal("#quick-edit-modal", false);
            g(document.body).trigger("glozin_progress_bar_complete");
          },
        });
      }
    );
    function d() {
      var e = g(
          ".product-quickedit .variations_form.edit-cart-form:not(.product-select__variation)"
        ),
        i = e.find(".product-thumbnail"),
        o = i.find("img"),
        a = i.data("image_original"),
        n = e.find(".product-price"),
        r = e.find(".quick_edit_add_to_cart_button");
      i.attr("data-image_srcset_original", o.attr("srcset"));
      var s = i.attr("data-image_srcset_original");
      e.on("found_variation", function (e, t) {
        i.addClass("image-variation");
        if (t && t.image.thumb_src !== "undefined" && t.image.thumb_src) {
          o.attr("src", t.image.thumb_src);
        } else {
          o.attr("src", a);
        }
        if (t && t.image.srcset !== "undefined" && t.image.srcset) {
          o.attr("srcset", t.image.srcset);
        } else {
          o.attr("srcset", s);
        }
        if (n.length > 0) {
          if (n.find(".variation-price").length > 0) {
            n.find(".variation-price").remove();
          }
          if (t.price_html) {
            n.find(".price").css("display", "none");
            n.append('<div class="variation-price">' + t.price_html + "</div>");
          } else {
            n.find(".price").css("display", "");
          }
        } else {
          n = g(this).closest(".entry-summary").find(".glozin-product-price");
          if (n.length > 0) {
            if (n.find(".variation-price").length > 0) {
              n.find(".variation-price").remove();
            }
            if (t.price_html) {
              n.find(".price").css("display", "none");
              n.append(
                '<div class="variation-price">' + t.price_html + "</div>"
              );
            } else {
              n.find(".price").css("display", "");
            }
          }
        }
        if (r.length > 0) {
          if (
            t.availability_status &&
            (!t.is_purchasable ||
              !t.is_in_stock ||
              !t.variation_is_visible ||
              (t.is_pre_order !== undefined && t.is_pre_order == "yes"))
          ) {
            r.wc_set_content(t.availability_status);
          } else {
            r.wc_reset_content();
          }
          if (!t.is_purchasable || !t.is_in_stock || !t.variation_is_visible) {
            r.addClass("disabled wc-variation-selection-needed");
          } else {
            r.removeClass("disabled wc-variation-selection-needed");
          }
        }
      });
      e.on("reset_data", function () {
        if (i.hasClass("image-variation")) {
          i.removeClass("image-variation");
          o.attr("src", a);
          o.attr("srcset", s);
        }
        if (n.length > 0 && n.find(".variation-price").length > 0) {
          n.find(".variation-price").remove();
          n.find(".price").css("display", "");
        } else {
          n = g(this).closest(".entry-summary").find(".glozin-product-price");
          if (n.length > 0 && n.find(".variation-price").length > 0) {
            n.find(".variation-price").remove();
            n.find(".price").css("display", "");
          }
        }
        if (r.length > 0) {
          r.wc_reset_content();
          r.addClass("disabled wc-variation-selection-needed");
        }
      });
      e.find(".value select").each(function () {
        var e = g(this).closest(".value").siblings(".label").find("label"),
          t = e.find(".wcboost-variation-swatches__selected-label");
        if (!t.length) {
          t = g('<span class="wcboost-variation-swatches__selected-label" />');
          e.append(t);
        }
        if (this.value) {
          t.text(this.options[this.selectedIndex].text).show();
        } else {
          t.text("").hide();
        }
      });
    }
  };
  f.updateCartAJAX = function (e) {
    var t = e.closest(".woocommerce-mini-cart-item"),
      i = e
        .closest(".widget_shopping_cart_content")
        .find(".woocommerce-mini-cart-item"),
      o = t.find("a.remove").data("cart_item_key"),
      a = t.find(".woocommerce-mini-cart-item__qty").data("nonce"),
      n = glozinData.ajax_url
        .toString()
        .replace("%%endpoint%%", "update_cart_item");
    if (g.fn.block) {
      t.block({
        message: null,
        overlayCSS: { opacity: 0.6, background: "#fff" },
      });
    }
    g(document.body).trigger("glozin_progress_bar_start");
    g.post(
      n,
      {
        cart_item_key: o,
        qty: e.val(),
        cart_item_length: i.length,
        security: a,
      },
      function (e) {
        if (!e || !e.fragments) {
          return;
        }
        if (g.fn.unblock) {
          t.unblock();
        }
        g(document.body).trigger("added_to_cart", [
          e.fragments,
          e.cart_hash,
          t,
        ]);
        g(document.body).trigger("glozin_progress_bar_complete");
      }
    ).fail(function () {
      if (g.fn.unblock) {
        t.unblock();
      }
      g(document.body).trigger("glozin_progress_bar_complete");
      return;
    });
  };
  f.recentlyViewedProducts = function () {
    var t = f.$body.find(".recently-viewed-products"),
      i = f.$body.find(".recently-viewed-products__title"),
      o = f.$body.find(".recently-viewed-products__description"),
      e = t.data("columns"),
      a = glozinData.ajax_url
        .toString()
        .replace("%%endpoint%%", "glozin_get_recently_viewed"),
      n = null;
    if (t.length < 1) {
      return;
    }
    if (t.hasClass("recently-viewed-products--elementor")) {
      return;
    }
    if (t.hasClass("products-loaded")) {
      return;
    }
    if (!t.hasClass("has-ajax")) {
      return;
    }
    f.$window
      .on("scroll", function () {
        if (glozinIsVisible(t) && !n) {
          r();
        }
      })
      .trigger("scroll");
    function r() {
      if (t.data("requestRunning")) {
        return;
      }
      t.data("requestRunning", true);
      t.addClass("ajax-loading");
      n = g.post(a, { action: "glozin_get_recently_viewed" }, function (e) {
        if (e.success) {
          t.append(e.data);
          if (t.find(".no-products").length < 1) {
            if (t.find(".swiper").length) {
              f.glozinSwiper();
            }
            i.removeClass("hidden");
            o.removeClass("hidden");
            f.$body.trigger("glozin_get_products_ajax_loaded", [t, false]);
          }
          t.addClass("products-loaded");
          t.data("requestRunning", false);
          t.removeClass("ajax-loading");
        }
      });
    }
  };
  f.productAffiliate = function () {
    var e = g(".single-product div.product");
    if (!e.hasClass("product-type-external")) {
      return;
    }
    var t = e.find(".single_add_to_cart_button");
    t.on("click", function (e) {
      e.preventDefault();
      window.open(t.closest("form").attr("action"), "_blank");
    });
  };
  f.addedToWishlistNotice = function () {
    if (
      typeof glozinData.added_to_wishlist_notice === "undefined" ||
      !g.fn.notify
    ) {
      return;
    }
    f.$body.on("added_to_wishlist", function (e, t) {
      var i = t.data("product_title");
      o(i);
      return false;
    });
    function o(e) {
      e += " " + glozinData.added_to_wishlist_notice.added_to_wishlist_text;
      e +=
        '<a href="' +
        glozinData.added_to_wishlist_notice.wishlist_view_link +
        '" class="btn-button">' +
        glozinData.added_to_wishlist_notice.wishlist_view_text +
        "</a>";
      var t =
          '<span class="glozin-svg-icon message-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></span>',
        i =
          '<span class="glozin-svg-icon svg-active"><svg class="svg-icon" aria-hidden="true" role="img" focusable="false" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 1L1 14M1 1L14 14" stroke="#A0A0A0" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg></span>';
      g.notify.addStyle("glozin", { html: "<div>" + t + e + i + "</div>" });
      g.notify("&nbsp", {
        autoHideDelay:
          glozinData.added_to_wishlist_notice.wishlist_notice_auto_hide,
        className: "success",
        style: "glozin",
        showAnimation: "fadeIn",
        hideAnimation: "fadeOut",
      });
    }
  };
  f.addedToCompareNotice = function () {
    if (
      typeof glozinData.added_to_compare_notice === "undefined" ||
      !g.fn.notify
    ) {
      return;
    }
    f.$body.on("added_to_compare", function (e, t) {
      var i = t.data("product_title");
      o(i);
      return false;
    });
    function o(e) {
      e += " " + glozinData.added_to_compare_notice.added_to_compare_text;
      e +=
        '<a href="' +
        glozinData.added_to_compare_notice.compare_view_link +
        '" class="btn-button">' +
        glozinData.added_to_compare_notice.compare_view_text +
        "</a>";
      var t =
          '<span class="glozin-svg-icon message-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></span>',
        i =
          '<span class="glozin-svg-icon svg-active"><svg class="svg-icon" aria-hidden="true" role="img" focusable="false" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 1L1 14M1 1L14 14" stroke="#A0A0A0" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg></span>';
      g.notify.addStyle("glozin", { html: "<div>" + t + e + i + "</div>" });
      g.notify("&nbsp", {
        autoHideDelay:
          glozinData.added_to_compare_notice.compare_notice_auto_hide,
        className: "success",
        style: "glozin",
        showAnimation: "fadeIn",
        hideAnimation: "fadeOut",
      });
    }
  };
  f.copyLink = function () {
    g(".glozin-copylink__button").on("click", function (e) {
      e.preventDefault();
      var t = g(this).closest("form").find(".glozin-copylink__link");
      t.select();
      document.execCommand("copy");
      var i = g(this).data("icon"),
        o = g(this).data("icon_copied");
      if (o) {
        g(this).html(o);
      }
    });
  };
  f.currencyLanguage = function () {
    if (!g(".glozin-currency-language").length) {
      return;
    }
    g(document.body)
      .on("click", ".glozin-currency-language .current", function (e) {
        if (!g(this).next().hasClass("currency-dropdown")) {
          return;
        }
        if (g(this).hasClass("active")) {
          g(this).removeClass("active");
          g(this).next(".currency-dropdown").removeClass("active");
        } else {
          g(".glozin-currency-language .current").removeClass("active");
          g(".glozin-currency-language .currency-dropdown").removeClass(
            "active"
          );
          g(".glozin-currency-language-mobile-menu").removeClass("opened");
          g(this).next(".currency-dropdown").stop().toggleClass("active");
          g(this).toggleClass("active");
          if (
            g(this)
              .closest(".glozin-currency-language")
              .hasClass("glozin-currency-language-mobile-menu")
          ) {
            g(this)
              .closest(".glozin-currency-language-mobile-menu")
              .toggleClass("opened");
          }
        }
      })
      .on("keyup", function (e) {
        if (e.keyCode === 27) {
          g(this).removeClass("active");
          g(".glozin-currency-language .current").removeClass("active");
          g(".glozin-currency-language .currency-dropdown").removeClass(
            "active"
          );
          g(".glozin-currency-language-mobile-menu").removeClass("opened");
        }
      })
      .on("click", function (e) {
        var t = g(e.target);
        if (t.is(".glozin-currency-language .current")) {
          return;
        }
        if (t.is(".glozin-currency-language .preferences-menu__item-child")) {
          return;
        }
        g(".glozin-currency-language .current").removeClass("active");
        g(".glozin-currency-language .currency-dropdown").removeClass("active");
        g(".glozin-currency-language-mobile-menu").removeClass("opened");
      });
    g(document.body).on("glozin_popover_opened", function () {
      g(".glozin-currency-language .current").removeClass("active");
      g(".glozin-currency-language .currency-dropdown").removeClass("active");
      g(".glozin-currency-language-mobile-menu").removeClass("opened");
    });
    g(document.body).on(
      "click",
      ".glozin-currency-language-mobile-menu .current",
      function () {
        var e = g(this).next(".currency-dropdown");
        g(this)
          .closest(".glozin-currency-language-mobile-menu")
          .css(
            "--gz-currency-language-mobile-menu-height",
            e.outerHeight() + "px"
          );
      }
    );
  };
  f.mobileMenu = function () {
    var o = g("#mobile-menu-panel");
    if (!o.length) {
      return;
    }
    o.on("click", ".panel__menu-items a", function (e) {
      e.preventDefault();
      var t = g(this).closest("li"),
        i = t.index();
      g(this).toggleClass("active");
      t.siblings().find("a").removeClass("active");
      o.find(".panel__content-items")
        .eq(i)
        .addClass("active")
        .siblings()
        .removeClass("active");
    });
  };
  f.hamburgerToggleMenuItem = function () {
    var e = g("#mobile-menu-panel"),
      t = "ul.menu li.menu-item-has-children > a";
    if (!e.length) {
      return;
    }
    if (glozinData.header_mobile_menu_open_primary_submenus_on == "icon") {
      e.find("ul.menu li.menu-item-has-children > a").append(
        '<span class="toggle-menu-children"></span>'
      );
      t = "ul.menu li.menu-item-has-children > a .toggle-menu-children";
    }
    var i = e.find(".panel__footer .submenu-items--heading");
    e.find("li.menu-item-has-children").each(function () {
      g(this)
        .find("ul.sub-menu")
        .prepend('<li class="submenu-items--heading">' + i.html() + "</li>");
    });
    e.on("click", t, function (e) {
      e.preventDefault();
      var t = g(this).data("title");
      if (!t) {
        t = g(this).closest("a").data("title");
      }
      g(this)
        .closest("li.menu-item-has-children")
        .find(".submenu-items--title-text")
        .html(t);
      g(this).closest("li.menu-item-has-children").addClass("submenu--open");
    });
    e.on("click", ".submenu-items--title", function (e) {
      e.preventDefault();
      if (g(this).closest(".mega-items--heading").length) {
        g(this).closest(".mega-menu__column").removeClass("submenu--open");
        g(this)
          .closest("li.menu-item-has-children")
          .removeClass("megamenu--open");
      } else {
        g(this)
          .closest("li.menu-item-has-children")
          .removeClass("submenu--open");
      }
    });
  };
  f.hamburgerToggleMegaMenuItem = function () {
    var e = g("#mobile-menu-panel"),
      t = ".mega-menu .menu-item--widget-heading";
    if (!e.length) {
      return;
    }
    if (glozinData.header_mobile_menu_open_primary_submenus_on == "icon") {
      e.find(".mega-menu .menu-item--widget-heading > *").append(
        '<span class="toggle-menu-children"></span>'
      );
      t = ".mega-menu .menu-item--widget-heading > * .toggle-menu-children";
    }
    var n = e.find(".panel__footer .submenu-items--heading");
    e.find(".mega-menu__column").each(function () {
      var o = g(this).find(".menu-item--widget-heading"),
        a = g(this).find(".menu-item").not(".menu-item--widget-heading");
      if (!o.length) {
        return;
      }
      if (a.length) {
        let e = g("<li class='sub-menu'><ul></ul></li>"),
          t = e.find("ul"),
          i = g(
            "<li class='submenu-items--heading mega-items--heading'>" +
              n.html() +
              "</li>"
          );
        i.appendTo(t);
        a.each(function () {
          g(this).appendTo(t);
        });
        o.after(e);
      }
    });
    e.on("click", t, function (e) {
      e.preventDefault();
      var t = "";
      if (g(this).closest(".menu-item--widget-heading-title").length) {
        t = g(this).closest(".menu-item--widget-heading-title").html();
      } else {
        t = g(this).find(".menu-item--widget-heading-title").html();
      }
      g(this)
        .closest(".mega-menu__column")
        .find(".submenu-items--heading")
        .find(".submenu-items--title-text")
        .html(t);
      g(this).closest(".mega-menu__column").addClass("submenu--open");
      g(this).closest("li.menu-item-has-children").addClass("megamenu--open");
    });
  };
  f.headerCampaignBar = function () {
    var e = g("#campaign-bar");
    if (!e.length) {
      return;
    }
    e.on("click", ".campaign-bar__close", function (e) {
      e.preventDefault();
      g(this).closest(".campaign-bar").slideUp();
    });
  };
  f.stickyHeader = function () {
    if (f.$body.hasClass("elementor-editor-active")) {
      return;
    }
    if (glozinData.header_sticky) {
      e(
        f.$header.find(".site-header__desktop"),
        f.$header.find(".site-header__section.glozin-header-sticky")
      );
    }
    if (glozinData.header_mobile_sticky) {
      e(
        f.$header.find(".site-header__mobile"),
        f.$header.find(".site-header__section.glozin-header-mobile-sticky")
      );
    }
    function e(e, t) {
      var i = f.$header.outerHeight(true) / 2,
        o = f.$body.outerHeight(true),
        a = g("#campaign-bar").is(":visible") ? g("#campaign-bar").height() : 0,
        n = g("#topbar").is(":visible") ? g("#topbar").height() : 0,
        r = i + a + n,
        s = f.$header.find(".site-header__desktop").length
          ? f.$header.find(".site-header__desktop").outerHeight()
          : 0,
        d = f.$header.find(".site-header__mobile").length
          ? f.$header.find(".site-header__mobile").outerHeight()
          : 0;
      if (o < r * 5) {
        return;
      }
      if ("up" === glozinData.header_sticky_on) {
        if (e.length && typeof Headroom !== "undefined") {
          var l = new Headroom(e.get(0), { offset: r });
          l.init();
        }
      }
      f.$window.on("scroll", function () {
        var e = f.$window.scrollTop();
        if (o <= r + f.$window.height()) {
          return;
        }
        if (e > r) {
          f.$header.css({
            "--gz-header-height": s + "px",
            "--gz-header-height-mobile": d + "px",
          });
          if ("up" !== glozinData.header_sticky_on) {
            t.addClass("minimized");
          }
          f.$header.addClass("gz-header-sticky-visible");
        } else {
          f.$header.removeAttr("style");
          f.$header.removeClass("gz-header-sticky-visible");
          if ("up" !== glozinData.header_sticky_on) {
            t.removeClass("minimized");
          }
        }
      });
    }
  };
  f.headerProductCategories = function () {
    var t = g("#header-sidebar-categories"),
      e = t.find(".header-sidebar-categories__backdrop");
    t.on("mouseenter", function () {
      t.addClass("opened");
    });
    e.on("mouseenter", function (e) {
      t.removeClass("opened");
      e.stopPropagation();
    });
  };
  f.backToTop = function () {
    var a = g("#gotop");
    f.$window.on("scroll", function () {
      if (f.$window.scrollTop() > 100) {
        a.addClass("show-scroll");
      } else {
        a.removeClass("show-scroll");
      }
      let e = f.$window.scrollTop(),
        t = g(document).height(),
        i = g(window).height(),
        o = (e / (t - i)) * 100;
      a.css("--gz-gotop-height-scroll", o + "%");
    });
    f.$body.on("click", "#gotop", function (e) {
      e.preventDefault();
      g("html, body").animate({ scrollTop: 0 }, 600);
    });
  };
  f.toggleProductCategoriesWidget = function () {
    var e = g(".widget_product_categories");
    e.find("li.cat-parent").each(function () {
      if (g(this).find("ul.children").length > 0) {
        g(this).append('<span class="gz-product-cat-item-toggle"></span>');
      }
    });
    e.on("click", "li.cat-parent > .gz-product-cat-item-toggle", function (e) {
      e.preventDefault();
      var t = g(this).closest("li.cat-parent");
      t.toggleClass("active").siblings().removeClass("active");
      t.children("ul.children").slideToggle();
    });
    g(".catalog-filters-sidebar .wp-block-group").each(function () {
      if (g(this).find(".wp-block-heading").length) {
        g(this).find(".wp-block-heading").addClass("gz-widget-heading clicked");
        g(this)
          .find(".wp-block-heading")
          .append('<span class="gz-collapse-icon"></span>');
        g(this)
          .find(".wp-block-heading")
          .nextAll()
          .wrapAll('<div class="gz-widget-group dropdown"/>');
      }
    });
    g(".catalog-filters-sidebar .widget").each(function () {
      if (g(this).find(".widget-title").length) {
        g(this).find(".widget-title").addClass("gz-widget-heading clicked");
        g(this)
          .find(".widget-title")
          .append('<span class="gz-collapse-icon"></span>');
        g(this)
          .find(".widget-title")
          .nextAll()
          .wrapAll('<div class="gz-widget-group dropdown"/>');
      }
    });
    g(".catalog-filters-sidebar .gz-widget-heading").on("click", function (e) {
      e.preventDefault();
      if (!g(this).next().hasClass("dropdown")) {
        return;
      }
      if (
        g(this).closest(".catalog-filters-horizontal").length &&
        g(window).width() > 1024
      ) {
        return;
      }
      g(this).next(".dropdown").stop().slideToggle();
      g(this).toggleClass("active");
      return false;
    });
  };
  f.dropdownProductCategoriesSidebar = function (e) {
    var t = g(".wp-block-woocommerce-product-categories"),
      i = t.find(".wc-block-product-categories-list");
    if (!t.hasClass("is-list")) {
      return;
    }
    t.addClass("gz-product-categories-widget");
    i.addClass("gz-product-categories-dropdown");
    i.closest(".wc-block-product-categories-list-item").addClass(
      "gz-product-categories-has-children"
    );
    i.closest(".wc-block-product-categories-list-item").append(
      '<span class="gz-product-categories-toggler" aria-hidden="true"></span>'
    );
    t.on(
      "click",
      ".gz-product-categories-has-children > .gz-product-categories-toggler",
      function (e) {
        e.preventDefault();
        var t = g(this).closest(".gz-product-categories-has-children");
        t.toggleClass("active").siblings().removeClass("active");
        t.children(".gz-product-categories-dropdown").slideToggle();
        t.siblings().find(".gz-product-categories-dropdown").slideUp();
      }
    );
  };
  f.formatPrice = function (e) {
    var t = glozinData.currency_symbol,
      i = glozinData.thousand_sep,
      o = glozinData.decimal_sep,
      a = glozinData.price_decimals,
      n = glozinData.currency_pos,
      r = e;
    if (parseInt(a) > -1) {
      e = e.toFixed(a) + "";
      var s = e.split(".");
      var d = s[0],
        l = s.length > 1 ? o + s[1] : "";
      if (i) {
        var c = /(\d+)(\d{3})/;
        while (c.test(d)) {
          d = d.replace(c, "$1" + i + "$2");
        }
      }
      r = d + l;
    }
    switch (n) {
      case "left":
        return t + r;
        break;
      case "right":
        return r + t;
        break;
      case "left_space":
        return t + " " + r;
        break;
      case "right_space":
        return r + " " + t;
        break;
    }
  };
  f.tooltip = function () {
    f.$body
      .on("mouseenter", ".gz-tooltip", function (e) {
        t(g(this));
      })
      .on("mouseleave", ".gz-tooltip", function (e) {
        var t = f.$body.find(".gz-tooltip--data");
        if (t.hasClass("left")) {
          t.addClass("move-right");
        } else if (t.hasClass("right")) {
          t.addClass("move-left");
        } else {
          t.addClass("move-down");
        }
        setTimeout(function () {
          t.remove();
        }, 300);
      });
    function t(s) {
      if (s.hasClass("loading")) {
        g(".gz-tooltip--data").remove();
        return;
      }
      var d = g(
          '<div class="gz-tooltip--data position-absolute text-light"></div>'
        ),
        l = s,
        e = 50;
      d.appendTo("body");
      d.attr("data-tooltip", s.data("tooltip"));
      if (s.data("tooltip_added")) {
        d.attr("data-tooltip_added", s.data("tooltip_added"));
      }
      if (s.hasClass("added")) {
        d.addClass("added");
        if (!s.data("tooltip_added")) {
          d.attr("data-tooltip_added", s.data("tooltip"));
        }
      }
      d.fadeIn(e, function () {
        var e = l.offset(),
          t = l.outerHeight(),
          i = g(".gz-tooltip--data").outerWidth(),
          o = g(".gz-tooltip--data").outerHeight(),
          a = e.top - o + t + "px",
          n = e.left + l.outerWidth() / 2 - i / 2 + "px",
          r = 10;
        if (s.hasClass("gz-tooltip-short-spacing")) {
          r = 6;
        }
        d.addClass("top");
        a = e.top - o - r + "px";
        if (!s.closest(".tooltip-top").length) {
          if (
            (!c() && l.data("tooltip_position") === "left") ||
            (c() && l.data("tooltip_position") === "right")
          ) {
            d.addClass("left");
            n = c() ? e.left - i + r + "px" : e.left - i - r + "px";
            a = e.top + l.outerHeight() / 2 - o / 2 + "px";
          }
          if (
            (!c() && l.data("tooltip_position") === "right") ||
            (c() && l.data("tooltip_position") === "left")
          ) {
            d.addClass("right");
            n = c()
              ? e.left + l.outerWidth() + r + "px"
              : e.left + l.outerWidth() - r + "px";
            a = e.top + l.outerHeight() / 2 - o / 2 + "px";
          }
          if (l.data("tooltip_position") === "bottom") {
            d.addClass("bottom");
            a = e.top + t + r + "px";
          }
        }
        d.css({ top: a, left: n });
      });
    }
    g(document.body).on("added_to_cart wc_fragments_refreshed", function () {
      g(".gz-tooltip--data").remove();
    });
    function c() {
      if (
        g("html").attr("dir") === "rtl" ||
        g("body").css("direction") === "rtl"
      ) {
        return true;
      }
      return false;
    }
  };
  f.orderComments = function () {
    var t = g("#order_comments_field #order_comments");
    if (!t.length) {
      return;
    }
    if (localStorage.getItem("order_comments")) {
      t.val(localStorage.getItem("order_comments"));
    }
    var e = t.attr("data-autosave") !== "false";
    if (e) {
      t.on("input", function () {
        localStorage.setItem("order_comments", g(this).val());
      });
    } else {
      var i = g(".order-comments-save");
      if (i.length) {
        g(document).on("click", ".order-comments-save", function (e) {
          e.preventDefault();
          localStorage.setItem("order_comments", t.val());
        });
      }
    }
    g("form.checkout").on("submit", function () {
      localStorage.removeItem("order_comments");
    });
  };
  f.navigationBar = function () {
    var e = g("#glozin-mobile-navigation-bar");
    if (!e.length) {
      return;
    }
    f.$body.css("--gz-navigation-bar-height", e.outerHeight() + "px");
    f.$body.addClass("mobile-has-navigation-bar");
  };
  g(function () {
    f.init();
  });
})(jQuery);
